<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.18.25"/><title data-react-helmet="true"></title><link rel="icon" href="/icons/icon-48x48.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=94ceb9b51c6de2126f40c4145de4f9d3"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-ffccd36e526ae56e91e7.js"/><link as="script" rel="preload" href="/commons-2751926334d209155bfc.js"/><link as="script" rel="preload" href="/app-624a27859923bf5f4ef0.js"/><link as="script" rel="preload" href="/webpack-runtime-9f2cc79b23a998381eb4.js"/><link as="fetch" rel="preload" href="/page-data/blog/2020/upgrading-to-angular-9-di-error/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><article id="main"><header><a href="/blog"><h2>My Blog</h2></a><p>Those Who Dream The Most...Do The Most</p></header><section class="wrapper style5"><div class="inner"><h2>Upgrading to Angular 9 DI Error</h2><p><em>February 21, 2020</em></p><div class="blog-post-content"><h3>Some Context</h3>
<p>Days after the release of Angular 9, I quickly and easily upgraded an enterprise application I've been working on for the better part of a year. Using the Angular CLI this was made super simple and painless using <code>ng-upgrade</code>. After the upgrade schematic ran I quickly ran an <code>ng serve</code> and wah-la! My app worked great and is running on IVY!.</p>
<p>Everything was great until about 2 weeks later another dev on my team pushed an update to a private npm package my app was consuming. That package was an angular library running in version 7. The library built just fine and passed all our CI checks and published it to npm successfully. Once I upgraded my enterprise app to pull in that minor update of that npm package my app completely blew up at run-time. My app built just fine but my view had nothing but a white screen and a very non-descript console error. </p>
<p>After a few hours of debugging, I figured I would share my findings in case anyone else runs into this issue in the future. </p>
<h3>The Error</h3>
<p><code>Error: Can't resolve all parameters for ConfiguredLogger</code></p>
<p>I reviewed my library module to verify I was providing the correct dependencies and reviewed the ConfiguredLogger itself. All looked good to me, so I thought maybe the library didn't bundle correctly before deploying. I reviewed the bundled files which looked good as well. After looking deeper into the stack trace I found the culprit!</p>
<p><code>// InjectionTokens should have an injectable def (ɵprov) and thus should be handled above.
// If it's missing that, it's an error.
if (token instanceof InjectionToken) {
throw new Error(Token ${stringify(token)} is missing a ɵprov definition.);
}
</code>
I noticed the comment on like 16,829 of my angular core.js file! I then reviewed my ConfiguredLogger and found the culprit</p>
<code>
export class ConfiguredLogger{
  constructor(
    @Inject(LOGGER_CONFIG) loggerConfig: LoggerConfig) {}
}
</code>
<p>My Class was using an <code>@Inject()</code> decorator in the constructor but I didn't have an <code>@Injectable()</code> decorator on the class itself. (This must be one of the reasons why people dislike decorators!)</p>
<h3>Final Thoughts</h3>
<p>Ultimately it was a very simple fix but something very easy to miss with the previous versions of Angular. It turns out this was most likely issue for a while but wasn't raised until upgrading to version 9. Ultimately I hope this quick write up will save you the time I lost!</p></div><a class="button small icon solid fa-chevron-left" href="/blog">Back To Blog</a></div></section></article></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2020/upgrading-to-angular-9-di-error";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-624a27859923bf5f4ef0.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-ec1da19b77b8d79a622f.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-ffccd36e526ae56e91e7.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c2915e380543bcb70e63.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-e8b8a6c907df4a63c5c3.js"],"component---src-pages-index-js":["/component---src-pages-index-js-53b35c787d87a9fdc44a.js"]};/*]]>*/</script><script src="/webpack-runtime-9f2cc79b23a998381eb4.js" async=""></script><script src="/app-624a27859923bf5f4ef0.js" async=""></script><script src="/commons-2751926334d209155bfc.js" async=""></script><script src="/component---src-templates-blog-template-js-ffccd36e526ae56e91e7.js" async=""></script></body></html>